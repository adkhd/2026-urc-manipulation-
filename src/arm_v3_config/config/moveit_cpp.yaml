# ============================================================
# MoveIt CPP Configuration
# ============================================================

planning_scene_monitor_options:
  name: "planning_scene_monitor"
  robot_description: "robot_description"
  joint_state_topic: "/joint_states"
  attached_collision_object_topic: "/attached_collision_object"
  publish_planning_scene_topic: "/publish_planning_scene"
  monitored_planning_scene_topic: "/monitored_planning_scene"
  wait_for_initial_state_timeout: 10.0

planning_pipelines:
  pipeline_names: ["ompl"]

# ============================================================
# OMPL Planning Pipeline - λ¨λ“  μ„¤μ •μ„ ompl μ•„λλ΅!
# ============================================================
ompl:
  planning_plugin: ompl_interface/OMPLPlanner
  
  request_adapters: >-
    default_planner_request_adapters/AddTimeOptimalParameterization
    default_planner_request_adapters/ResolveConstraintFrames
    default_planner_request_adapters/FixWorkspaceBounds
    default_planner_request_adapters/FixStartStateBounds
    default_planner_request_adapters/FixStartStateCollision
    default_planner_request_adapters/FixStartStatePathConstraints
  
  # Request Adapter νλΌλ―Έν„°λ“¤
  path_tolerance: 0.1
  resample_dt: 0.1
  min_angle_change: 0.001
  default_workspace_bounds: 10.0
  start_state_max_bounds_error: 0.1
  start_state_max_dt: 0.5
  jiggle_fraction: 0.05
  max_sampling_attempts: 200

  # π”¥ Planner μ„¤μ • - ompl μ•„λμ—!
  planner_configs:
    RRTConnect:
      type: geometric::RRTConnect
      range: 0.3              # π”¥ ν™•μ¥ κ±°λ¦¬ (0.0 = μλ™)
    
    RRTstar:
      type: geometric::RRTstar
      range: 0.3
      goal_bias: 0.1          # π”¥ λ©ν‘ μ§€ν–¥ ν™•λ¥  (0~1)
      delay_collision_checking: 1
    
    RRT:
      type: geometric::RRT
      range: 0.3
      goal_bias: 0.05
    
    LBKPIECE:
      type: geometric::LBKPIECE
      range: 0.3
      border_fraction: 0.9    # π”¥ κ²½κ³„ νƒμƒ‰ λΉ„μ¨
      min_valid_path_fraction: 0.5
    
    EST:
      type: geometric::EST
      range: 0.3
      goal_bias: 0.05

  # π”¥ Planning Group μ„¤μ • - ompl μ•„λμ—!
  arm:
    planner_configs:
      - RRTConnectkConfigDefault
      - RRTstar
      - RRT
      - LBKPIECE
      - EST
    
    default_planner_config: RRTConnectkConfigDefault
    longest_valid_segment_fraction: 0.005  # π”¥ κ²½λ΅ λ³΄κ°„ λ°€λ„ (μ‘μ„μλ΅ μ •λ°€)
    enforce_constrained_state_space: false
    projection_evaluator: joints(Joint1,Joint2)

# ============================================================
# Plan Request Default Parameters
# ============================================================
plan_request_params:
  planning_attempts: 1
  planning_time: 5.0
  max_velocity_scaling_factor: 0.5
  max_acceleration_scaling_factor: 0.5