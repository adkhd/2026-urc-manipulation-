# ============================================================
# Complete OMPL Configuration (ëª¨ë“  íŒŒë¼ë¯¸í„° ì„¤ì •)
# ============================================================

planning_plugin: ompl_interface/OMPLPlanner

# Request Adapters
request_adapters: >-
  default_planner_request_adapters/AddTimeOptimalParameterization
  default_planner_request_adapters/ResolveConstraintFrames
  default_planner_request_adapters/FixWorkspaceBounds
  default_planner_request_adapters/FixStartStateBounds
  default_planner_request_adapters/FixStartStateCollision
  default_planner_request_adapters/FixStartStatePathConstraints

planning_pipelines:
  - ompl

# ============================================================
# OMPL Pipeline ì„¤ì •
# ============================================================
ompl:
  planning_plugin: ompl_interface/OMPLPlanner
  
  # ------------------------------------------------------------
  # Time Optimal Parameterization (ê¶¤ì  ì‹œê°„ ìµœì í™”)
  # ------------------------------------------------------------
  path_tolerance: 0.1             # ê²½ë¡œ í—ˆìš© ì˜¤ì°¨ (m)
  resample_dt: 0.1                # ë¦¬ìƒ˜í”Œë§ ì‹œê°„ ê°„ê²© (s)
  min_angle_change: 0.001         # ìµœì†Œ ê°ë„ ë³€í™” (rad)
  
  # ------------------------------------------------------------
  # Workspace Bounds (ì‘ì—… ê³µê°„ ê²½ê³„)
  # ------------------------------------------------------------
  default_workspace_bounds: 10.0  # ì‘ì—… ê³µê°„ í¬ê¸° (m)
  
  # ------------------------------------------------------------
  # Start State Validation (ì‹œì‘ ìƒíƒœ ê²€ì¦)
  # ------------------------------------------------------------
  start_state_max_bounds_error: 0.1   # ì‹œì‘ ìƒíƒœ ê²½ê³„ ì˜¤ì°¨ í—ˆìš© (rad/m)
  start_state_max_dt: 0.5             # ì‹œì‘ ìƒíƒœ ì‹œê°„ ê°„ê²© (s)
  
  # ------------------------------------------------------------
  # Collision Avoidance (ì¶©ëŒ íšŒí”¼)
  # ------------------------------------------------------------
  jiggle_fraction: 0.05           # ì¶©ëŒ ì‹œ ì›€ì§ì„ ë¹„ìœ¨ (0~1)
  max_sampling_attempts: 200      # ìµœëŒ€ ìƒ˜í”Œë§ ì‹œë„ íšŸìˆ˜

# ============================================================
# ê·¸ë£¹ë³„ ì„¤ì • (arm)
# ============================================================
arm:
  # ì‚¬ìš© ê°€ëŠ¥í•œ í”Œë˜ë„ˆ ëª©ë¡
  planner_configs:
    - RRTConnectkConfigDefault
    - RRTstarkConfigDefault
    - PRMstarkConfigDefault
    - ESTkConfigDefault
  
  # ê¸°ë³¸ í”Œë˜ë„ˆ
  default_planner_config: RRTConnectkConfigDefault
  
  # Projection Evaluator (ì£¼ì„ ì²˜ë¦¬ - ì—ëŸ¬ ë°©ì§€)
  # projection_evaluator: joints(joint1,joint2)
  
  # ìœ íš¨ ì„¸ê·¸ë¨¼íŠ¸ ë¹„ìœ¨
  longest_valid_segment_fraction: 0.01
  
  # Constrained planning
  enforce_constrained_state_space: false

# ============================================================
# Plannerë³„ ì„¸ë¶€ ì„¤ì •
# ============================================================
planner_configs:
  
  # RRTConnect (ë¹ ë¥´ê³  ì•ˆì •ì ) â­ ì¶”ì²œ
  RRTConnectkConfigDefault:
    type: geometric::RRTConnect
    range: 0.0  # 0 = ìë™ ê³„ì‚°
  
  # RRT* (ìµœì  ê²½ë¡œ)
  RRTstarkConfigDefault:
    type: geometric::RRTstar
    range: 0.0
    goal_bias: 0.05
    delay_collision_checking: 1
    rewire_factor: 1.1
  
  # PRM* (ë³µì¡í•œ í™˜ê²½)
  PRMstarkConfigDefault:
    type: geometric::PRMstar
    max_nearest_neighbors: 10
  
  # EST (ì¢ì€ í†µë¡œ)
  ESTkConfigDefault:
    type: geometric::EST
    range: 0.0
    goal_bias: 0.05

# ============================================================
# ğŸ”¥ ì¶”ê°€ ìµœì í™” ì„¤ì • (ì„ íƒì‚¬í•­)
# ============================================================

# ì„±ê³µë¥ ì„ ë†’ì´ë ¤ë©´ ì´ë ‡ê²Œ ìˆ˜ì •:
# arm:
#   planner_configs:
#     - RRTConnectkConfigDefault
#   longest_valid_segment_fraction: 0.02  # 0.01 â†’ 0.02 (ë” ë¹ ë¦„)
#
# ompl:
#   start_state_max_bounds_error: 0.2     # 0.1 â†’ 0.2 (ë” ê´€ëŒ€)
#   jiggle_fraction: 0.1                  # 0.05 â†’ 0.1 (ë” ì ê·¹ì )
#   max_sampling_attempts: 500            # 200 â†’ 500 (ë” ë§ì´ ì‹œë„)
#   path_tolerance: 0.2                   # 0.1 â†’ 0.2 (ë” ê´€ëŒ€)

# ============================================================
# ì„¤ëª…
# ============================================================
# 
# path_tolerance: 
#   - ê¶¤ì ì´ ì›ë˜ ê²½ë¡œì—ì„œ ì–¼ë§ˆë‚˜ ë²—ì–´ë‚˜ë„ ë˜ëŠ”ì§€
#   - ì‘ì„ìˆ˜ë¡ ì •ë°€, í´ìˆ˜ë¡ ì„±ê³µë¥ â†‘
#
# resample_dt:
#   - ê¶¤ì ì„ ì¬ìƒ˜í”Œë§í•˜ëŠ” ì‹œê°„ ê°„ê²©
#   - ì‘ì„ìˆ˜ë¡ ë¶€ë“œëŸ¬ì›€
#
# min_angle_change:
#   - ê¶¤ì  í¬ì¸íŠ¸ ì‚¬ì´ ìµœì†Œ ê°ë„ ë³€í™”
#   - ì‘ì„ìˆ˜ë¡ ì„¸ë°€
#
# default_workspace_bounds:
#   - ë¡œë´‡ ì‘ì—… ê³µê°„ì˜ í¬ê¸°
#   - ì¶©ë¶„íˆ í¬ê²Œ ì„¤ì •
#
# start_state_max_bounds_error:
#   - ì‹œì‘ ìì„¸ê°€ joint limitì—ì„œ ë²—ì–´ë‚œ ì •ë„ í—ˆìš©
#   - í´ìˆ˜ë¡ ê´€ëŒ€
#
# start_state_max_dt:
#   - ì‹œì‘ ìƒíƒœ ì¡°ì • ì‹œê°„
#
# jiggle_fraction:
#   - ì¶©ëŒ ì‹œ ë¡œë´‡ì„ ì–¼ë§ˆë‚˜ ì›€ì§ì—¬ì„œ ë²—ì–´ë‚˜ë ¤ í•˜ëŠ”ì§€
#   - í´ìˆ˜ë¡ ì ê·¹ì 
#
# max_sampling_attempts:
#   - ìœ íš¨í•œ ìƒíƒœë¥¼ ì°¾ê¸° ìœ„í•œ ìµœëŒ€ ì‹œë„ íšŸìˆ˜
#   - í´ìˆ˜ë¡ ì„±ê³µë¥ â†‘, ëŠë¦¼
#
# longest_valid_segment_fraction:
#   - ê²½ë¡œ ê²€ì¦ ì‹œ ì„¸ê·¸ë¨¼íŠ¸ ê¸¸ì´
#   - ì‘ì„ìˆ˜ë¡ ì •ë°€, ëŠë¦¼
# ============================================================